<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>查看推广人</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" th:href="@{/frame/layui-v2/css/layui.css}" media="all">
    <style>
        .layui-input {
            padding-left: 0;
            margin-left: 10px;
        }
    </style>
</head>
<body>

<form id="editForm" class="layui-form" action="businessPeople/selectPeopleCode" onsubmit="return false"  style="margin:20px 10px;">
    <input id="opMethod" type="hidden" name="opMethod" />
    <input id="businessPeopleId" type="hidden" name="businessPeopleId" />
    <input id="accountBank_t" type="hidden" name="accountBank_t" />
    <div class="layui-form-item" pane="">
        <label class="layui-form-label">推广员状态</label>
        <div class="layui-input-block">
            <input id="Yes" name="state" value="1" title="有效" checked="" type="radio" disabled>
            <input id="No" name="state" value="0" title="无效" type="radio" disabled>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">推广员姓名</label>
        <div class="layui-input-inline">
            <input id="businessPeopleName" name="businessPeopleName" lay-verify="required" autocomplete="off" class="layui-input" type="text" disabled>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">推广员证件类型</label>
        <div class="layui-input-inline">
            <select id="businessPeopleIdType" name="businessPeopleIdType" lay-verify="required" autocomplete="off"  class="layui-input" type="text" disabled>
                <option value="01">身份证</option>
                <option value="02">护照</option>
                <option value="03">军官证</option>
                <option value="04">台胞证</option>
                <option value="05">港澳通行证</option>
            </select>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">推广员证件号码</label>
        <div class="layui-input-inline">
            <input id="idNo" name="idNo" lay-verify="required" autocomplete="off"  class="layui-input" type="text" disabled>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">推广员手机号</label>
        <div class="layui-input-inline">
            <input id="tel" name="tel" lay-verify="noZeroInteger" autocomplete="off"  class="layui-input" type="text" disabled>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">推广员银行卡</label>
        <div class="layui-input-inline">
            <select id="accountBank" name="accountBank" lay-verify="required" autocomplete="off"  class="layui-input" type="text" disabled>
                <option value="">请选择</option>
                <option value="01">工商银行</option>
                <option value="02">建设银行</option>
                <option value="03">农业银行</option>
                <option value="04">中国银行</option>
                <option value="05">招商银行</option>
            </select>
        </div>
        <label class="layui-form-label">推广人银行卡号</label>
        <div class="layui-input-inline">
            <input id="accountCode" name="accountCode" lay-verify="required" autocomplete="off"  class="layui-input" type="text" disabled>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">推广员住址：</label>
        <div class="layui-input-inline" style="width: 80px">
            <input id="province" name="province" lay-verify="required" autocomplete="off"  class="layui-input" type="text" disabled>
        </div>
        <label class="layui-form-label" style="width: 14px;padding-left: 0px">省</label>
        <div class="layui-input-inline" style="width: 80px">
            <input id="city" name="city" lay-verify="required" autocomplete="off"  class="layui-input" type="text" disabled>
        </div>
        <label class="layui-form-label" style="width: 14px;padding-left: 0px">市</label>
        <div class="layui-input-inline" style="width: 80px">
            <input id="district" name="district" lay-verify="required" autocomplete="off"  class="layui-input" type="text" disabled>
        </div>
        <label class="layui-form-label" style="width: 40px;padding-left: 0px">区/县</label>
        <div class="layui-input-inline">
            <input id="detailedAddress" name="detailedAddress" lay-verify="required" autocomplete="off" class="layui-input" type="text" disabled>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">推广员级别</label>
        <div class="layui-input-inline">
            <select id="businessPeopleLevel" name="businessPeopleLevel" lay-verify="required" autocomplete="off"  class="layui-input" type="text" disabled>
                <option value="0">初级</option>
                <option value="1">中级</option>
                <option value="2">高级</option>
            </select>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">推广员微信号</label>
        <div class="layui-input-inline">
            <input id="wchat" name="wchat" lay-verify="required" autocomplete="off"  class="layui-input" type="text" disabled>
        </div>
    </div>
</form>
</body>
<script th:src="@{/frame/layui-v2/layui.js}" charset="utf-8"></script>
<script type="text/javascript">
    layui.use('upload', function(){
        var $ = layui.jquery
            , upload = layui.upload;

        //身份证背面图片上传
        var uploadInst = upload.render({
            elem: '#backOfIDCard'
            ,url: 'file/uploadImage/'
            ,done: function(res){
                //如果上传失败
                if(res.code > 0){
                    $("[name=backOfIDCardUrl]").val("");
                    $('#backOfIDCardView').attr('src', "");
                    return layer.msg('上传失败');
                }
                //上传成功
                $("[name=backOfIDCardUrl]").val(res.src);
                $('#backOfIDCardView').attr('src', res.src);
                return layer.msg('上传成功');
            }
        });
        //身份证正面上载
        var uploadInst = upload.render({
            elem: '#faceOfIDCard'
            ,url: 'file/uploadImage/'
            ,done: function(res){
                //如果上传失败
                if(res.code > 0){
                    $("[name=faceOfIDCardUrl]").val("");
                    $('#faceOfIDCardView').attr('src', "");
                    return layer.msg('上传失败');
                }
                //上传成功
                $("[name=faceOfIDCardUrl]").val(res.src);
                $('#faceOfIDCardView').attr('src', res.src);
                return layer.msg('上传成功');
            }
        });
        //手持身份证上载
        var uploadInst = upload.render({
            elem: '#handIDCard'
            ,url: 'file/uploadImage/'
            ,done: function(res){
                //如果上传失败
                if(res.code > 0){
                    $("[name=handIDCardUrl]").val("");
                    $('#handIDCardView').attr('src', "");
                    return layer.msg('上传失败');
                }
                //上传成功
                $("[name=handIDCardUrl]").val(res.src);
                $('#handIDCardView').attr('src', res.src);
                return layer.msg('上传成功');
            }
        });
        //协议合同上载
        var uploadInst = upload.render({
            elem: '#contract'
            ,url: 'file/uploadImage/'
            ,done: function(res){
                //如果上传失败
                if(res.code > 0){
                    $("[name=contractUrl]").val("");
                    $('#contractView').attr('src', "");
                    return layer.msg('上传失败');
                }
                //上传成功
                $("[name=contractUrl]").val(res.src);
                $('#contractView').attr('src', res.src);
                return layer.msg('上传成功');
            }
        });



    });
    layui.use([ 'form', 'layedit', 'laydate'], function() {
        var form = layui.form;
        var $ = layui.$;//获取jquery组件
        selectRoleName()
        form.verify({
            noZeroInteger : function (value) {
                if(!new RegExp(/^[1-9]\d*$/).test(value)){
                    return '请输入数字';
                }

            }
        });

        //监听提交
        form.on('submit(add_button)', function(editData) {
            params = editData.field;
            // 发现有字段变更之后，通过ajax更新所有字段
            $.post("businessPeople/addBusinessPeopleIn", params, function(result) {
                if (true) {
                    var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引（父类的弹框）
                    parent.layer.close(index); //再执行关闭
                    window.parent.location.reload();
                    layer.alert('保存成功！');
                } else {
                    layer.alert('保存失败：' + result.errorMessage);
                }
            });

            return false;
        });

        function selectRoleName(){

            $.ajax({
                url:"institution/queryInstitution",
                type:"POST",
                dataType:"json",
                data:{
                    type:"0"
                },
                success:function(result){
                    var institutionId_t= $("#accountBank_t").val();
                    // console.log(document.getElementById("institutionId"));
                    var list = result.data;    //返回的数据
                    var role = document.getElementById("accountBank");        //add_role_name给select定义的id
                    for(var i=0;i<list.length;i++){
                        var option = document.createElement("option");    // 创建添加option属性
                        option.setAttribute("value",list[i].institutionCode);                  // 给option的value添加值
                        option.innerText=list[i].institutionName;             // 打印option对应的纯文本 （超级管理员、管理员）
                        if (list[i].institutionCode==institutionId_t) {
                            option.defaultSelected=true;                       //赋默认值
                        }
                        role.appendChild(option);                          // 给select 添加option子标签
                        form.render("select");                                // 刷性select，显示出数据
                    }
                }
            });
        }
    });


</script>
</html>